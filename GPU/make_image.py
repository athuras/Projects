#!/usr/bin/env python
import numpy as np
import matplotlib
import matplotlib.pyplot as plt
import mandelbrot as md

# I apologise for this, its a hack.
cdict = {
    'blue': [(0.0, 0, 0),
    (0.125, 0.9686274528503418, 0.9686274528503418),
    (0.25, 0.93725490570068359, 0.93725490570068359),
    (0.375, 0.88235294818878174, 0.88235294818878174),
    (0.5, 0.83921569585800171, 0.83921569585800171),
    (0.625, 0.7764706015586853, 0.7764706015586853),
    (0.75, 0.70980393886566162, 0.70980393886566162),
    (0.875, 0.61176472902297974, 0.61176472902297974),
    (1.0, 0.41960784792900085, 0.41960784792900085)],

    'green': [(0.0, 0., 0.0),
    (0.125, 0.92156863212585449, 0.92156863212585449),
    (0.25, 0.85882353782653809, 0.85882353782653809),
    (0.375,  0.7921568751335144, 0.7921568751335144),
    (0.5, 0.68235296010971069, 0.68235296010971069),
    (0.625, 0.57254904508590698, 0.57254904508590698),
    (0.75, 0.44313725829124451, 0.44313725829124451),
    (0.875, 0.31764706969261169, 0.31764706969261169),
    (1.0, 0.18823529779911041, 0.18823529779911041)],

    'red': [(0.0, 0.0, 0.0),
    (0.125, 0.87058824300765991, 0.87058824300765991),
    (0.25, 0.7764706015586853, 0.7764706015586853),
    (0.375, 0.61960786581039429, 0.61960786581039429),
    (0.5, 0.41960784792900085, 0.41960784792900085),
    (0.625, 0.25882354378700256, 0.25882354378700256),
    (0.75, 0.12941177189350128, 0.12941177189350128),
    (0.875, 0.031372550874948502, 0.031372550874948502),
    (1.0, 0.031372550874948502, 0.031372550874948502)]}

blues2 = matplotlib.colors.LinearSegmentedColormap('blues2', cdict, 1000)

res = (2048, 2048)
DPI = 100.
# Still not entirely sure why the image gets flipped, but w/e, YOLO etc.
mset = md.generate_set(-0.85, -0.7, 0., 0.25, resolution=res, maxiter=2048)
fig = plt.figure(figsize=map(lambda x: x / DPI,  res))
ax = fig.add_subplot(111)
ax.imshow(mset.reshape(res), cmap=blues2, aspect='equal')
fig.savefig("mandelbrot_pycuda.png", dpi=DPI)

interesting_parameters = [{'center': -0.743030 -0.126433j, 'mag': 190.99}]

print 'fin'
